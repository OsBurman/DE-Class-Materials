# OpenAPI Components — Error Response Schemas (Solution)

components:
  schemas:

    ProblemDetails:
      type: object
      description: RFC 7807 Problem Details — a standard machine-readable error envelope for HTTP APIs
      required:
        - type
        - title
        - status
      properties:
        type:
          type: string
          format: uri
          description: A URI that uniquely identifies the error type; should link to documentation about this error
          example: https://api.library.com/errors/not-found
        title:
          type: string
          description: A short, human-readable summary of the problem type; does NOT change between occurrences of the same type
          example: Resource Not Found
        status:
          type: integer
          description: The HTTP status code for this occurrence; mirrors the response status line
          example: 404
        detail:
          type: string
          description: A human-readable explanation specific to this occurrence of the problem (may change per request)
          example: Book with id=99 was not found
        instance:
          type: string
          format: uri
          description: A URI reference that identifies the specific request or resource that caused the error
          example: /api/v1/books/99

    NotFoundError:
      allOf:
        - $ref: '#/components/schemas/ProblemDetails'
      description: Returned when the requested resource does not exist (HTTP 404)
      example:
        type: https://api.library.com/errors/not-found
        title: Resource Not Found
        status: 404
        detail: Book with id=99 was not found
        instance: /api/v1/books/99

    ValidationError:
      allOf:
        - $ref: '#/components/schemas/ProblemDetails'
      description: Returned when the request body is syntactically valid but fails business/semantic validation rules (HTTP 422)
      properties:
        violations:
          type: array
          description: A list of individual field-level validation failures
          items:
            type: object
            properties:
              field:
                type: string
                description: The name of the field that failed validation
              message:
                type: string
                description: A human-readable description of the validation rule that was violated
      example:
        type: https://api.library.com/errors/validation-failure
        title: Validation Failure
        status: 422
        detail: One or more fields failed validation
        instance: /api/v1/books
        violations:
          - field: title
            message: must not be blank

    ConflictError:
      allOf:
        - $ref: '#/components/schemas/ProblemDetails'
      description: Returned when the request conflicts with the current state of a resource, such as a duplicate unique key (HTTP 409)
      example:
        type: https://api.library.com/errors/conflict
        title: Resource Conflict
        status: 409
        detail: A book with ISBN '978-3-16-148410-0' already exists
        instance: /api/v1/books
